!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SFlux",[],e):"object"==typeof exports?exports.SFlux=e():t.SFlux=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Store=e.createMutationTypes=e.createAction=e.getGlobalStore=e.setGlobalStore=void 0;var r=n(1),o=n(2),i=n(9),s=n(11);e.setGlobalStore=r.setGlobalStore,e.getGlobalStore=r.getGlobalStore,e.createAction=o.createAction,e.createMutationTypes=s.createMutationTypes,e.Store=i.Store},function(t,e){"use strict";function n(t){o=t}function r(){return o}Object.defineProperty(e,"__esModule",{value:!0}),e.setGlobalStore=n,e.getGlobalStore=r;var o},function(t,e,n){"use strict";function r(t){return function(e,n){return n||(n=(0,o.getGlobalStore)()),n||(0,i.error)("No store related to this action! you can regist a global store or pass it to the action with the second argument.","action"),new s(function(r,o){t(e,{store:n,dispatch:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];n.dispatch(t),e||r(t)},error:function(t){o(t)}})})}}Object.defineProperty(e,"__esModule",{value:!0}),e.createAction=r;var o=n(1),i=n(3),s=n(4).Promise},function(t,e,n){"use strict";function r(t){arguments.length<=1||void 0===arguments[1]?"":arguments[1]}function o(t){arguments.length<=1||void 0===arguments[1]?"":arguments[1]}Object.defineProperty(e,"__esModule",{value:!0}),e.warning=r,e.error=o},function(t,e,n){var r;(function(t,o,i){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){function u(t){return"function"==typeof t||"object"===("undefined"==typeof t?"undefined":s(t))&&null!==t}function c(t){return"function"==typeof t}function a(t){X=t}function f(t){et=t}function l(){return function(){t.nextTick(v)}}function h(){return function(){V(v)}}function d(){var t=0,e=new ot(v),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function p(){var t=new MessageChannel;return t.port1.onmessage=v,function(){t.port2.postMessage(0)}}function y(){return function(){setTimeout(v,1)}}function v(){for(var t=0;t<tt;t+=2){var e=ut[t],n=ut[t+1];e(n),ut[t]=void 0,ut[t+1]=void 0}tt=0}function _(){try{var t=n(7);return V=t.runOnLoop||t.runOnContext,h()}catch(e){return y()}}function b(t,e){var n=this,r=new this.constructor(g);void 0===r[ft]&&B(r);var o=n._state;if(o){var i=arguments[o-1];et(function(){I(o,r,i,n._result)})}else C(n,r,t,e);return r}function m(t){var e=this;if(t&&"object"===("undefined"==typeof t?"undefined":s(t))&&t.constructor===e)return t;var n=new e(g);return O(n,t),n}function g(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function S(){return new TypeError("A promises callback cannot return that same promise.")}function j(t){try{return t.then}catch(e){return pt.error=e,pt}}function x(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function A(t,e,n){et(function(t){var r=!1,o=x(n,e,function(n){r||(r=!0,e!==n?O(t,n):M(t,n))},function(e){r||(r=!0,P(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,P(t,o))},t)}function k(t,e){e._state===ht?M(t,e._result):e._state===dt?P(t,e._result):C(e,void 0,function(e){O(t,e)},function(e){P(t,e)})}function E(t,e,n){e.constructor===t.constructor&&n===ct&&constructor.resolve===at?k(t,e):n===pt?P(t,pt.error):void 0===n?M(t,e):c(n)?A(t,e,n):M(t,e)}function O(t,e){t===e?P(t,w()):u(e)?E(t,e,j(e)):M(t,e)}function T(t){t._onerror&&t._onerror(t._result),D(t)}function M(t,e){t._state===lt&&(t._result=e,t._state=ht,0!==t._subscribers.length&&et(D,t))}function P(t,e){t._state===lt&&(t._state=dt,t._result=e,et(T,t))}function C(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+ht]=n,o[i+dt]=r,0===i&&t._state&&et(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?I(n,r,o,i):o(i);t._subscribers.length=0}}function G(){this.error=null}function F(t,e){try{return t(e)}catch(n){return yt.error=n,yt}}function I(t,e,n,r){var o,i,s,u,a=c(n);if(a){if(o=F(n,r),o===yt?(u=!0,i=o.error,o=null):s=!0,e===o)return void P(e,S())}else o=r,s=!0;e._state!==lt||(a&&s?O(e,o):u?P(e,i):t===ht?M(e,o):t===dt&&P(e,o))}function L(t,e){try{e(function(e){O(t,e)},function(e){P(t,e)})}catch(n){P(t,n)}}function Y(){return vt++}function B(t){t[ft]=vt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function N(t){return new wt(this,t).promise}function K(t){var e=this;return new e($(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function U(t){var e=this,n=new e(g);return P(n,t),n}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(t){this[ft]=Y(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&W(),this instanceof z?L(this,t):q())}function H(t,e){this._instanceConstructor=t,this.promise=new t(g),this.promise[ft]||B(this.promise),$(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&M(this.promise,this._result))):P(this.promise,J())}function J(){return new Error("Array Methods must be provided an Array")}function Q(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=gt)}var R;R=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var V,X,Z,$=R,tt=0,et=function(t,e){ut[tt]=t,ut[tt+1]=e,tt+=2,2===tt&&(X?X(v):Z())},nt="undefined"!=typeof window?window:void 0,rt=nt||{},ot=rt.MutationObserver||rt.WebKitMutationObserver,it="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),st="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ut=new Array(1e3);Z=it?l():ot?d():st?p():void 0===nt?_():y();var ct=b,at=m,ft=Math.random().toString(36).substring(16),lt=void 0,ht=1,dt=2,pt=new G,yt=new G,vt=0,_t=N,bt=K,mt=U,gt=z;z.all=_t,z.race=bt,z.resolve=at,z.reject=mt,z._setScheduler=a,z._setAsap=f,z._asap=et,z.prototype={constructor:z,then:ct,"catch":function(t){return this.then(null,t)}};var wt=H;H.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===lt&&n<t;n++)this._eachEntry(e[n],n)},H.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===at){var o=j(t);if(o===ct&&t._state!==lt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===gt){var i=new n(g);E(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},H.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===lt&&(this._remaining--,t===dt?P(r,n):this._result[e]=n),0===this._remaining&&M(r,this._result)},H.prototype._willSettleAt=function(t,e){var n=this;C(t,void 0,function(t){n._settledAt(ht,e,t)},function(t){n._settledAt(dt,e,t)})};var St=Q,jt={Promise:gt,polyfill:St};n(8).amd?(r=function(){return jt}.call(e,n,e,i),!(void 0!==r&&(i.exports=r))):"undefined"!=typeof i&&i.exports?i.exports=jt:"undefined"!=typeof this&&(this.ES6Promise=jt),St()}).call(void 0)}).call(e,n(5),function(){return this}(),n(6)(t))},function(t,e){"use strict";function n(){l&&a&&(l=!1,a.length?f=a.concat(f):h=-1,f.length&&r())}function r(){if(!l){var t=s.call(null,n);l=!0;for(var e=f.length;e;){for(a=f,f=[];++h<e;)a&&a[h].run();h=-1,e=f.length}a=null,l=!1,u.call(null,t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var s,u,c=t.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(t){u=function(){throw new Error("clearTimeout is not defined")}}}();var a,f=[],l=!1,h=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new o(t,e)),1!==f.length||l||s.call(null,r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=n(10),c=function(){function t(e){var n=e.initialState,i=void 0===n?{}:n,s=e.mutation,c=void 0===s?function(t,e){return t}:s,a=e.modules,f=void 0===a?{}:a,l=e.middlewares,h=void 0===l?[]:l,d=e.name,p=void 0===d?"store":d;r(this,t),this.name=p,this.id=(0,u.uid)("store-"+p),this._cloneOptions={},Object.keys(arguments[0]).forEach(function(t){this._cloneOptions=(0,u.deepClone)(arguments[0][t])}.bind(this)),"object"!=("undefined"==typeof i?"undefined":o(i))&&this._error("The `initialState` must be pure object!"),"function"!=typeof c&&this._error("The `mutation` must be pure function!"),Object.keys(f).forEach(function(t){var e=f[t];"string"!=typeof t&&this._error("The key of `modules` must be string!"),e._isSFluxInstance||this._error("The value of `modules` must be `Store instance`!"),f[t]=e.clone()}.bind(this)),this._callbacks=[],this._mutation=c,this._modules=f,this._middlewares=h,this._isSFluxInstance=!0,this._isDispatching=!1,this._isDispatched=!1,this._state=i,Object.keys(f).forEach(function(t){var e=f[t];this._state[t]=e.getState()}.bind(this)),this._middlewares.forEach(function(t){"function"==typeof t.onInit&&t.onInit(this._state,this)}.bind(this))}return i(t,[{key:"getState",value:function(){return this._state}},{key:"dispatch",value:function(t){var e,n;this._isDispatching&&(0,s.error)("<Store> Can not make another dispatch in one dispatch in the store!"),this._isDispatching=!0,this._isDispatched=!0,Object.keys(this._modules).forEach(function(t){var e=this._modules[t];e._isDispatched=!1}.bind(this)),this._middlewares.forEach(function(e){"function"==typeof e.onBeforeMutation&&e.onBeforeMutation(t,this._state,this)}.bind(this)),e=this.getState(),n=this._mutation(e,t),Object.keys(this._modules).forEach(function(e){var n=this._modules[e];n._isDispatched||(n.dispatch(t),this._state[e]=n.getState())}.bind(this)),this._middlewares.forEach(function(e){"function"==typeof e.onMutation&&e.onMutation(t,this._state,this)}.bind(this)),this.emitChange(),this._isDispatching=!1}},{key:"emitChange",value:function(){var t=this;this._callbacks.forEach(function(e){e(t)})}},{key:"subscribe",value:function(t){var e=this._callbacks,n=e.indexOf(t),r=!0;return n!=-1&&this._error("The callback function has been subscribed!"),e.push(t),function(){var n;r&&(n=e.indexOf(t),e.splice(n,1),r=!1)}}},{key:"module",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this._mixins[t];n||this._error("The modules<"+t+"> not registed in the store!"),n._isDispatched||(n.dispatch(e),this._state[t]=n.getState())}},{key:"clone",value:function(){return new t(this._cloneOptions)}},{key:"_error",value:function(t){(0,s.error)("<Store: "+this.id+"> "+t)}}]),t}();e.Store=c},function(t,e){"use strict";function n(t){return i++,"s-flux-["+t+"]-"+i}function r(t){if(Array.isArray(t))return t.map(r);if(t&&"object"===("undefined"==typeof t?"undefined":o(t))){for(var e={},n=Object.keys(t),i=0,s=n.length;i<s;i++){var u=n[i];e[u]=r(t[u])}return e}return t}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.uid=n,e.deepClone=r;var i=0},function(t,e,n){"use strict";function r(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],e={};return t.forEach(function(t){e[t]=(0,i.uid)("mutation-type-"+t)}),e}function o(t){return(0,i.uid)("mutation-type-"+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.createMutationTypes=r,e.createMutationType=o;var i=n(10)}])});